

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Tallgrass and Caldera User Guide &mdash; ET in the cloud 1.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="ET Process Overview" href="20_process_overview.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> ET in the cloud
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="10_right_now.html">Right Now</a><ul>
<li class="toctree-l2"><a class="reference internal" href="10_right_now.html#steffi">Steffi</a></li>
<li class="toctree-l2"><a class="reference internal" href="10_right_now.html#tony">Tony</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="20_process_overview.html">ET Process Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="20_process_overview.html#buckets">Buckets</a></li>
<li class="toctree-l2"><a class="reference internal" href="20_process_overview.html#compute">Compute</a><ul>
<li class="toctree-l3"><a class="reference internal" href="20_process_overview.html#ec2">Ec2</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="20_process_overview.html#delivery-to-the-end-user">Delivery to the end-user</a></li>
<li class="toctree-l2"><a class="reference internal" href="20_process_overview.html#time-estimate-table">Time Estimate Table</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Tallgrass and Caldera User Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#run-conus-mosaics-on-tallgrass">Run Conus Mosaics on Tallgrass</a></li>
<li class="toctree-l2"><a class="reference internal" href="#testing">Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="#general-algorythm">General Algorythm</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-to-cheat-at-slurm">How to Cheat at Slurm</a></li>
<li class="toctree-l2"><a class="reference internal" href="#hpc-references">HPC References</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">ET in the cloud</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Tallgrass and Caldera User Guide</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/90_tallgrass.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="tallgrass-and-caldera-user-guide">
<h1>Tallgrass and Caldera User Guide<a class="headerlink" href="#tallgrass-and-caldera-user-guide" title="Permalink to this headline">¶</a></h1>
<div class="section" id="run-conus-mosaics-on-tallgrass">
<h2>Run Conus Mosaics on Tallgrass<a class="headerlink" href="#run-conus-mosaics-on-tallgrass" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>make salloc - to allocate a node for 1 hour</p></li>
<li><p>make shell - to get a bash in the new allocation</p></li>
<li><p>cd opt/etm_v3_tony</p></li>
<li><p>conda activate pangeo</p></li>
<li><p>cd tallgrass</p></li>
<li><p>cd conus_api_etm</p></li>
</ul>
</div>
<div class="section" id="testing">
<h2>Testing<a class="headerlink" href="#testing" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>make test</p></li>
</ul>
</div>
<div class="section" id="general-algorythm">
<h2>General Algorythm<a class="headerlink" href="#general-algorythm" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>parameters</p>
<ul>
<li><p>year</p></li>
<li><p>in  # input path</p></li>
<li><p>out # output path</p></li>
</ul>
</li>
<li><p>command_line_runner</p>
<ul>
<li><p>get input parameters</p></li>
<li><p>call mos.run_mosaic</p></li>
</ul>
</li>
<li><p>run_mosaic (cos_mosaic.py)</p>
<ul>
<li><p>get subfolders</p></li>
<li><p>_do_just_one_day  ( for each day 1,365)</p></li>
</ul>
</li>
<li><p>_do_just_one_day</p>
<ul>
<li><p>DS = xr_build_mosaic_ds(bucket, p, tifs) - # bucket here is extraineous</p></li>
<li><p>xr_write_geotiff_from_ds(DS, primary_name, out_prefix_path)</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="how-to-cheat-at-slurm">
<h2>How to Cheat at Slurm<a class="headerlink" href="#how-to-cheat-at-slurm" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>#!/bin/sh

#SBATCH --account=eros
#SBATCH -p gpu
#SBATCH --time=2-00:00:00
#SBATCH --job-name=unet-train
#SBATCH -o %j_train.out
#SBATCH --error=%j_train.err
#SBATCH -N 1
#SBATCH -n 1
#SBATCH --mail-type=ALL
#SBATCH --mail-user=rfleckenstein@contractor.usgs.gov
#SBATCH --hint=compute_bound
#SBATCH --gres=gpu:4 # number of GPU&#39;s you are requesting

# load analytics and cuda modules
module load cuda11.3/toolkit/11.3.0
module load analytics
source /home/rfleckenstein/miniconda3/bin/activate tense

export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/home/rfleckenstein/miniconda3/pkgs/cudnn-8.1.0.77-h90431f1_0/lib:/home/rfleckenstein/miniconda3/pkgs/cudatoolkit-11.2.0-h73cb219_8/lib

# train the model
python ~/unet_nlcd/train.py ~/unet_nlcd/configs/config_double.json
</pre></div>
</div>
<ul class="simple">
<li><p>#SBATCH –time=2-00:00:00 - # what this mean?</p></li>
</ul>
<blockquote>
<div><p>thats for letting them know how much time it might take to run your job, max youre allowed is 2 days so if you dont know you put that but if you do know how long it will take you should make it closer because it puts you higher in priority, longer jobs get moved down in the queue</p>
</div></blockquote>
</div>
<div class="section" id="hpc-references">
<h2>HPC References<a class="headerlink" href="#hpc-references" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>https://www.tablesgenerator.com/markdown_tables#</p></li>
<li><p>https://stackoverflow.com/questions/68094835/how-to-load-anaconda-virtual-environment-from-slurm</p></li>
<li><p>https://help.rc.ufl.edu/doc/Sample_SLURM_Scripts</p></li>
<li></li>
<li><p>https://github.com/tonybutzer/harmony-docs/blob/ecc524ce73a08f6eb81e8d38e4fa89eb65efe5af/documentation/source/01hpc.md</p></li>
<li><p>https://www.esma.europa.eu/sites/default/files/library/jc-2018-04_joint_committee_final_report_on_big_data.pdf</p></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="20_process_overview.html" class="btn btn-neutral float-left" title="ET Process Overview" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2022, Tony Butzer

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>